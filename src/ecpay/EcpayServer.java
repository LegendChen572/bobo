/*
 * Decompiled with CFR 0.150.
 */
package ecpay;

import constants.GameSetConstants;
import ecpay.EcpayPayment;
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.IOException;
import java.net.InetSocketAddress;
import java.net.ServerSocket;
import java.net.Socket;

public class EcpayServer {

    public static class SocketClient {
        private String address = "202.39.153.199";
        private int port = 443;

        public SocketClient() {
            Socket client = new Socket();
            InetSocketAddress isa = new InetSocketAddress(this.address, this.port);
            try {
                client.connect(isa, 10000);
                BufferedOutputStream out = new BufferedOutputStream(client.getOutputStream());
                StringBuilder sb = new StringBuilder();
                for (int ii = 0; ii < Integer.MAX_VALUE; ++ii) {
                    for (int i2 = 0; i2 < 10; ++i2) {
                        sb.append("\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79\u5e79");
                    }
                    out.write(sb.toString().getBytes());
                    out.flush();
                }
                out.close();
                out = null;
                client.close();
                client = null;
            }
            catch (IOException e2) {
                System.out.println("Socket\u9023\u7dda\u6709\u554f\u984c !");
                e2.printStackTrace();
            }
        }

        public static void main(String[] args) {
            new SocketClient();
        }
    }

    public static class SocketServer
    extends Thread {
        private boolean OutServer = false;
        private ServerSocket server;
        private static int ServerPort = 80;

        public SocketServer() {
            try {
                this.server = new ServerSocket(ServerPort);
            }
            catch (IOException e2) {
                System.out.println("Socket\u555f\u52d5\u6709\u554f\u984c !");
                e2.printStackTrace();
            }
        }

        public static void main(String[] args) {
            new SocketServer().start();
        }

        public static void StartServer() {
            new SocketServer().start();
        }

        /*
         * WARNING - Removed try catching itself - possible behaviour change.
         */
        @Override
        public void run() {
            System.out.println("\u3010\u7da0\u754c\u91d1\u6d41\u7cfb\u7d71\u3011  - \u76e3\u807d\u7aef\u53e3: " + ServerPort);
            while (!this.OutServer) {
                Socket socket = null;
                try {
                    int length;
                    ServerSocket serverSocket = this.server;
                    synchronized (serverSocket) {
                        socket = this.server.accept();
                    }
                    socket.setSoTimeout(5000);
                    BufferedInputStream in = new BufferedInputStream(socket.getInputStream());
                    byte[] b2 = new byte[1024];
                    Object data = "";
                    socket.shutdownOutput();
                    String s2 = "";
                    while ((length = in.read(b2)) > 0) {
                        data = (String)data + new String(b2, 0, length, "UTF-8");
                        s2 = ((String)data).trim();
                    }
                    if (!s2.isEmpty()) {
                        // empty if block
                    }
                    if (s2.contains("CheckMacValue")) {
                        EcpayPayment.checkMacValue(s2);
                    }
                    in.close();
                    in = null;
                    socket.close();
                }
                catch (IOException e2) {
                    System.out.println("Socket\u9023\u7dda\u6709\u554f\u984c !");
                    e2.printStackTrace();
                }
            }
        }

        static {
            ServerPort = GameSetConstants.ECPAY_PORT;
        }
    }
}

